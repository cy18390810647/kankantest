# -*- coding:utf-8 -*-
from mako import runtime, filters, cache
UNDEFINED = runtime.UNDEFINED
STOP_RENDERING = runtime.STOP_RENDERING
__M_dict_builtin = dict
__M_locals_builtin = locals
_magic_number = 10
_modified_time = 1558079355.768
_enable_loop = True
_template_filename = 'C:/Users/X230/PycharmProjects/LanhuSaas/framework/templates/monitor_scene/open.html'
_template_uri = './monitor_scene/open.html'
_source_encoding = 'utf-8'
_exports = []


def render_body(context,**pageargs):
    __M_caller = context.caller_stack._push_frame()
    try:
        __M_locals = __M_dict_builtin(pageargs=pageargs)
        STATIC_URL = context.get('STATIC_URL', UNDEFINED)
        SITE_URL = context.get('SITE_URL', UNDEFINED)
        __M_writer = context.writer()
        __M_writer(u'<!DOCTYPE html>\r\n<html>\r\n<head>\r\n    <title>Open Diagram</title>\r\n    <link rel="stylesheet" type="text/css" href="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'js/mxgraph/examples/grapheditor/www/styles/grapheditor.css" />\r\n    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">\r\n    <script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/vue-2.5.21/vue.development.js"></script>\r\n    <script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/element-2.4.11/index.js"></script>\r\n    <script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/vue-2.5.21/axios.min.js"></script>\r\n    <script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/jquery/jquery-3.1.1.min.js"></script>\r\n    <script src="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'js/csrftoken.js"></script>\r\n    <link rel="stylesheet" href="')
        __M_writer(unicode(STATIC_URL))
        __M_writer(u'assets/element-2.4.11/index.css">\r\n</head>\r\n<style>\r\n    /*jlq-2019-05-08-add*/\r\n    .el-radio__inner {\r\n    border: 1px solid #fff;\r\n    border-radius: 100%;\r\n    width: 14px;\r\n    height: 14px;\r\n    background-color: #9E9E9E;\r\n    cursor: pointer;\r\n    -webkit-box-sizing: border-box;\r\n    box-sizing: border-box;\r\n}\r\n</style>\r\n<script type="text/javascript">\r\n\t// Handles form-submit by preparing to process response\r\n\tfunction handleSubmit()\r\n\t{\r\n\t    if (window.parent.openNew)\r\n        {\r\n            //\u6253\u5f00\u4e00\u4e2a\u65b0\u7684\u6d41\u7a0b\u8bbe\u8ba1\u5668\u7a97\u53e3\r\n            window.parent.open("')
        __M_writer(unicode(SITE_URL))
        __M_writer(u'monitor_scene/edit_flow_graph");\r\n        }\r\n\t    if(window.parent.openNew){\r\n\t        //\u5c06\u573a\u666f\u6570\u636e\u6ce8\u5165\u65b0\u6d41\u7a0b\u8bbe\u8ba1\u5668\r\n\t        window.parent.openFile.setData(vm.fileResult, vm.fileName);\r\n        } else{\r\n\t        //\u66ff\u6362\u7f16\u8f91\u5668\u4e2d\u7684\u573a\u666f\r\n\t        window.parent.replaceUpdateXml(vm.fileResult, vm.fileName);\r\n        }\r\n    };\r\n\t// Hides this dialog\r\n\tfunction hideWindow(cancel)\r\n\t{\r\n\t\twindow.parent.openFile.cancel(cancel);\r\n\t}\r\n\tfunction main()\r\n\t{\r\n\t\tif (window.parent.Editor.useLocalStorage)\r\n\t\t{\r\n\t\t\tdocument.body.innerHTML = \'\';\r\n\t\t\tvar div = document.createElement(\'div\');\r\n\t\t\tdiv.style.fontFamily = \'Arial\';\r\n\t\t\tdebugger\r\n\t\t\tif (localStorage.length == 0)\r\n\t\t\t{\r\n\t\t\t\twindow.parent.mxUtils.write(div, window.parent.mxResources.get(\'noFiles\'));\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tvar keys = [];\r\n\r\n\t\t\t\tfor (var i = 0; i < localStorage.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tkeys.push(localStorage.key(i));\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Sorts the array by filename (key)\r\n\t\t\t\tkeys.sort(function (a, b)\r\n\t\t\t\t{\r\n\t\t\t\t    return a.toLowerCase().localeCompare(b.toLowerCase());\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfor (var i = 0; i < keys.length; i++)\r\n\t\t\t\t{\r\n\t\t\t\t\tvar link = document.createElement(\'a\');\r\n\t\t\t\t\tlink.style.fontDecoration = \'none\';\r\n\t\t\t\t\tlink.style.fontSize = \'14pt\';\r\n\t\t\t\t\tvar key = keys[i];\r\n\t\t\t\t\twindow.parent.mxUtils.write(link, key);\r\n\t\t\t\t\tlink.setAttribute(\'href\', \'javascript:void(0);\');\r\n\t\t\t\t\tdiv.appendChild(link);\r\n\r\n\t\t\t\t\tvar img = document.createElement(\'span\');\r\n\t\t\t\t\timg.className = \'geSprite geSprite-delete\';\r\n\t\t\t\t\timg.style.position = \'relative\';\r\n\t\t\t\t\timg.style.cursor = \'pointer\';\r\n\t\t\t\t\timg.style.display = \'inline-block\';\r\n\t\t\t\t\tdiv.appendChild(img);\r\n\r\n\t\t\t\t\twindow.parent.mxUtils.br(div);\r\n\r\n\t\t\t\t\twindow.parent.mxEvent.addListener(img, \'click\', (function(k)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn function()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tif (window.parent.mxUtils.confirm(window.parent.mxResources.get(\'delete\') + \' "\' + k + \'"?\'))\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tlocalStorage.removeItem(k);\r\n\t\t\t\t\t\t\t\twindow.location.reload();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})(key));\r\n\r\n\t\t\t\t\twindow.parent.mxEvent.addListener(link, \'click\', (function(k)\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\treturn function()\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\ttry\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\twindow.parent.open(window.parent.location.href);\r\n\t\t\t\t\t\t\t\twindow.parent.openFile.setData(localStorage.getItem(k), k);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tcatch (e)\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\twindow.parent.mxUtils.alert(e.message);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t})(key));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\twindow.parent.mxUtils.br(div);\r\n\t\t\t//window.parent.mxUtils.br(div);\r\n\r\n\t\t\tvar cancelBtn = window.parent.mxUtils.button(window.parent.mxResources.get(\'cancel\'), function()\r\n\t\t\t{\r\n\t\t\t\thideWindow(true);\r\n\t\t\t});\r\n\t\t\tcancelBtn.className = \'geBtn\';\r\n\t\t\tdiv.appendChild(cancelBtn);\r\n\r\n\t\t\tdocument.body.appendChild(div);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tvar editLink = document.getElementById(\'editLink\');\r\n\t\t\tvar openButton = document.getElementById(\'openButton\');\r\n\t\t\topenButton.value = window.parent.mxResources.get(window.parent.openKey || \'open\');\r\n\t\t\tvar cancelButton = document.getElementById(\'cancelButton\');\r\n\t\t\tcancelButton.value = window.parent.mxResources.get(\'cancel\');\r\n\t\t\t//var supportedText = document.getElementById(\'openSupported\');\r\n\t\t\t//supportedText.innerHTML = window.parent.mxResources.get(\'openSupported\');\r\n\t\t\tvar form = window.openForm || document.getElementById(\'openForm\');\r\n\t\t}\r\n\t};\r\n</script>\r\n<body onload="main();">\r\n<form method="POST"  action="" name="openForm"\r\n\tid="openForm" onsubmit="return handleSubmit();" accept-charset="UTF-8">\r\n<div id="app" style="background: #ffffff;width: 100%;" >\r\n    <!-- div1 start-->\r\n    <div class="div_one" style="padding: 20px 5px 0px 5px;">\r\n        <div @keyup.enter="show">\r\n            <el-input placeholder="\u8bf7\u8f93\u5165\u573a\u666f\u540d\u79f0" clearable  v-model.trim="contents" style="width:70%" @keyup.enter="show" ></el-input>\r\n            <el-button type="primary" icon="el-icon-search" v-on:click="show" style="width:20%;margin-left: 50px;">\u641c\u7d22</el-button>\r\n        </div>\r\n        <div >\r\n            <el-table :data=\'sites\' style="width: 100%;margin-top: 5px;" border header-align="center">\r\n                <el-table-column prop="id" min-width="30%" label="\u9009\u62e9" sortable>\r\n                    <template slot-scope="scope">\r\n                        <!-- class="textRadio" -->\r\n                        <el-radio @change.native="getCurrentRow(scope.$index,scope.row)" :label="scope.row.id" v-model="templateRadio">&nbsp;</el-radio>\r\n                    </template>\r\n                </el-table-column>\r\n                <el-table-column prop="scene_name" min-width="70%" label="\u573a\u666f\u540d\u79f0" sortable></el-table-column>\r\n            </el-table>\r\n            <el-pagination :page-count="page_count" background layout="prev, pager, next" style="float:right"\r\n                           @current-change="current_change1" :current-page="page"></el-pagination>\r\n        </div>\r\n    </div>\r\n</div>\r\n<table style="width:100%;">\r\n<tr>\r\n<td>\r\n</td>\r\n<td style="vertical-align:middle;text-align:right;white-space:nowrap;">\r\n<input type="button" id="cancelButton" class="geBtn" value="Cancel" onclick="hideWindow(true);">\r\n<input type="submit" id="openButton" class="geBtn gePrimaryBtn" value="Open" disabled="disabled">\r\n</td>\r\n</tr>\r\n</table>\r\n</form>\r\n</body>\r\n<script>\r\n    //csrf\u9a8c\u8bc1\r\n    axios.interceptors.request.use((config) => {\r\n        config.headers[\'X-Requested-With\'] = \'XMLHttpRequest\';\r\n        let regex = /.*csrftoken=([^;.]*).*$/; // \u7528\u4e8e\u4ececookie\u4e2d\u5339\u914d csrftoken\u503c\r\n        config.headers[\'X-CSRFToken\'] = document.cookie.match(regex) === null ? null : document.cookie.match(regex)[1];\r\n        return config\r\n    });\r\n    var vm = new Vue({\r\n        el: \'#app\',\r\n        data: {\r\n            page_count: 0,     //\u603b\u9875\u7801\u6570,\u521d\u59cb\u4e3a0\r\n            page: 1,             //\u5206\u9875\u9875\u7801\u6570\r\n            sites: [],           //table\u5185\u5bb9\r\n            message: \'\',         //\u5f39\u6846\u63d0\u793a\u4fe1\u606f\r\n            templateRadio:\'\',\r\n            fileName:"",         //\u573a\u666f\u6587\u4ef6\u540d\u79f0\r\n            fileResult:"",       //\u573a\u666f\u6587\u4ef6\u5185\u5bb9\r\n            contents:"",\r\n            scene_design: {\r\n                //\u573a\u666f\r\n                id:"",//\u7f16\u7801\r\n                scene_name:\'\',//\u573a\u666f\u540d\u79f0\r\n                scene_content:\'\'//\u573a\u666f\u5185\u5bb9o\r\n            },\r\n        },\r\n        methods: {\r\n            show() {\r\n                axios({\r\n                    method: \'post\',\r\n                    url: \'')
        __M_writer(unicode(SITE_URL))
        __M_writer(u"monitor_scene/page_query_scene/',\r\n                    data: {\r\n                        data: vm.contents,\r\n                        page: vm.page,\r\n                        limit: 5\r\n                    },\r\n                }).then(function (res) {\r\n                    //\u8fd9\u91cc\u8981\u6ce8\u610f\uff0c\u521d\u59cb\u5316\u662f\u6ca1\u6709\u6570\u636e\u7684\r\n                    if(res.data.results && res.data.results.scene_list.length > 0){\r\n                        vm.sites = res.data.results.scene_list;\r\n                        vm.page_count = res.data.results.scene_list[0].page_count;\r\n                    }else{\r\n                        vm.sites = [];\r\n                        vm.page_count = 1\r\n                    }\r\n                })\r\n            },\r\n            getCurrentRow(index,row){\r\n                let openButton = document.getElementById('openButton');\r\n                openButton.removeAttribute('disabled');\r\n                vm.templateRadio = row.id;\r\n                vm.fileName = row.scene_name;\r\n                vm.fileResult = row.scene_content;\r\n            },\r\n            current_change1(value) {\r\n                vm.page = value;\r\n                vm.show()\r\n            },\r\n        },\r\n    });\r\n    vm.show();\r\n</script>\r\n</html>\r\n")
        return ''
    finally:
        context.caller_stack._pop_frame()


"""
__M_BEGIN_METADATA
{"source_encoding": "utf-8", "line_map": {"32": 10, "33": 10, "34": 11, "35": 11, "36": 12, "37": 12, "38": 34, "39": 34, "40": 217, "41": 217, "47": 41, "16": 0, "23": 1, "24": 5, "25": 5, "26": 7, "27": 7, "28": 8, "29": 8, "30": 9, "31": 9}, "uri": "./monitor_scene/open.html", "filename": "C:/Users/X230/PycharmProjects/LanhuSaas/framework/templates/monitor_scene/open.html"}
__M_END_METADATA
"""
